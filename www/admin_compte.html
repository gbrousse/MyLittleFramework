<?php
    $user = $view->getOption('userDatas');
    $isAdmin = $view->services->user->isAdmin();
    $types = array(
        'user'=>'utilisateur',
        'admin'=>'administrateur'
    );
?>
    <main role="main" class="container">
        <h1 class="mt-5">Mon compte</h1>
        <?php if(isset($view->options['formError'])){ ?>
        <div class="alert alert-danger" role="alert">
            <strong>Oups!</strong> <?php echo $view->options['formError']; ?>
        </div>
        <?php } ?>
        <?php if(isset($view->options['formSuccess'])){ ?>
        <div class="alert alert-success" role="alert">
            Modifications enregistrées
        </div>
        <?php } ?>
        <form method="post">
            <div class="form-group row">
                <label for="login" class="col-3 col-form-label">Login</label>
                <div class="col-9">
                    <input type="text" class="form-control" name="login" id="login" placeholder="Login" value="<?php echo $user->getLogin(); ?>" >
                </div>
            </div>
            <div class="form-group row">
                <label for="email" class="col-3 col-form-label">Adresse mail</label>
                <div class="col-9">
                    <input type="email" class="form-control" name="email" id="email"  aria-describedby="mailHelp" placeholder="email" value="<?php echo $user->getEmail(); ?>" >
                    <small id="mailHelp" class="form-text text-muted">!!! Adresse utilisée pour les notifications !!!</small>
                </div>
            </div>
            <?php if($isAdmin){ ?>
            <div class="form-group row">
                <label for="type" class="col-3 col-form-label">Droits</label>
                <div class="col-9">
                    <select class="custom-select" id="type" name="type">
                        <?php foreach ($types as $type => $label) { ?>
                        <option value="<?php echo $type; ?>" <?php echo ($type==$user->getType())?'selected':''; ?>><?php echo $label; ?></option>
                        <?php } ?>
                    </select>
                </div>
            </div> 
            <?php } ?>
           
            <div class="form-group row">
                <label for="pass" class="col-3 col-form-label">Mot de passe</label>
                <div class="col-9">
                    <input type="password" class="form-control" name="pass" id="pass" aria-describedby="passHelp" placeholder="Mot de passe" value="">
                    <small id="passHelp" class="form-text text-muted">Ne pas remplir si vous ne voulez pas changer votre mot de passe.</small>

                </div>
            </div>
            <div class="form-group row">
                <label for="pass2" class="col-3 col-form-label">Répétez le mot de passe</label>
                <div class="col-9">
                    <input type="password" class="form-control" name="pass2" id="pass2" aria-describedby="pass2Help" placeholder="Mot de passe" value="">
                    <small id="pass2Help" class="form-text text-muted">Doit être identique au mot de passe au dessus.</small>

                </div>
            </div>
            <button type="submit" class="btn btn-primary">Enregistrer</button>
        </form>
    </main>
